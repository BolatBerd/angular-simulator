@if (isLoading) {
  <div id="loader-overlay" class="loading-overlay flex-s-b">
    <img class="rotate" src="/images/loading-icon.svg" alt="loading">
    <span class="spinner">Иконка загрузки, которую мы должны отобразить. Добавить анимацию прокрутки</span>
  </div>
} @else {
  <header class="header">
    <div class="container">
      <div class="header-menu flex-s-b" >
        <div class="header-menu-logo flex-column">
          <img src="/images/logo.svg" alt="logo" width="137px" height="48px"/>
          <span class="logo-name">{{ companyName }}</span>
        </div>
        <div class="flex-center">
          <nav class="nav flex-s-b fs-18">
            <a id="nav-home">Главная</a>
            <a id="nav-about-guide">Про гида</a>
            <a id="nav-tour-program">Программа тура</a>
            <a id="nav-pricing">Стоимость</a>
            <a id="nav-blog">Блог</a>
            <a id="nav-contacts">Контакты</a>
          </nav>
          <button
            id="btn-consultation-header"
            class="consultation fs-16 br-8"
            aria-label="Заказать консультацию"
          >
            Консультация
          </button>
        </div>
      </div>

      <div class="content flex-s-b">

        @if (isDateView) {
          <span class="timer">
            {{ currentDateAndTime }}
          </span>
        } @else {
          <div class="clicker flex-s-b">
            <button
              id="btn-counter-decrement"
              class="switcher cur-p"
              (click)="decrementCount()"
              [disabled]="count <= 0"
            >
              -
            </button>
            <span>{{ count }}</span>
            <button
              id="btn-counter-increment"
              class="switcher cur-p"
              (click)="incrementCount()"
            >
              +
            </button>
          </div>
        }

        <button
          id="btn-toggle-date-counter"
          class="consultation fs-16 br-8"
          (click)="toggleBlock()"
        >
          {{ isDateView ? 'Показать кликер' : 'Показать дату' }}
        </button>
      </div>

      <div class="header-text">
        <span>насладись прогулкой в горах</span>
        <span>с командой единомышленников</span>
      </div>
      <div class="menu br-8">
        <div class="menu-item flex-s-b gap-24">
          <div class="menu-field">
            <div class="flex-s-b menu-title br-8 fs-16 pos-rel"
              (click)="openSelect(locationInput)"
            >
              <select
                id="select-tour-location"
                class="select select-location-person"
                #locationInput
                [(ngModel)]="form.location"
              >
                <option value="" disabled selected>Локация для тура</option>
                <option value="altai">Алтай</option>
                <option value="caucasus">Кавказ</option>
                <option value="baikal">Байкал</option>
              </select>
              <img
                class="pr-16"
                src="/images/arrow-left-icon.svg"
                alt="arrow-left"
              >
            </div>
            <span class="menu-subtitle fs-14">выберите из списка</span>
          </div>
          <div class="menu-field">
            <div class="
              flex-s-b
              menu-title pos-rel
              br-8 fs-16"
              (click)="openDatePicker(dateInput)"
            >
              <input
                #dateInput
                id="input-tour-date"
                class="select pos-rel"
                type="date"
                [(ngModel)]="form.date"
                placeholder="Дата похода"
              />
              <label class="date-label cur-p pos-abs">
                <img
                  class="date-icon pr-16 cur-p"
                  src="/images/formkit_date.svg"
                  alt='calendar'
                />
              </label>
            </div>
            <span class="menu-subtitle fs-14">укажите диапазон</span>
          </div>
          <div class="menu-field">
            <div
              class="flex-s-b menu-title br-8 fs-16"
              (click)="openSelect(personImput)"
            >
              <select
                id="select-tour-persons"
                type="text"
                class="select select-location-person"
                #personImput
                [(ngModel)]="form.persons"
              >
                <option value="" disabled selected>выберите из списка</option>
                <option value="1">1 человек</option>
                <option value="2">2 человека</option>
                <option value="3">3 человека</option>
                <option value="4+">4+ человека</option>
              </select>
              <img class="pr-16" src="/images/arrow-left-icon.svg" alt="arrow-left">
            </div>
            <span class="menu-subtitle fs-14">выберите из списка</span>
          </div>
          <button
            id="btn-search-tour"
            [disabled]="!isFormValid()"
            class="button size-270-52 border fs-16 align-items br-8"
          >
            {{ isFormValid() ? 'Найти программу' : 'Заполните все поля' }}
          </button>
        </div>
      </div>
      <div class="flex-s-b">
        <input
          id="input-live-text"
          type="text"
          placeholder="Введите текст..."
          [(ngModel)]="liveInputValue"
        >
        <span class="result">{{ liveInputValue }}</span>
      </div>

      <div class="about flex-s-b">
        <div class="about-images pos-rel">
          <img
            class="index-0"
            src="/images/mountains.png"
            alt="Горы"
            width="350"
            height="400"
          >
          <div>
            <img
              class="index-1 pos-abs images-house"
              src="/images/house-in-mountains.png"
              alt="Горы"
              width="350px"
              height="400px"
            >
            <button id="btn-video-play">
              <img
                class="index-2 pos-abs svg-play"
                src="/images/play-icon.svg"
                alt="play-icon"
              >
            </button>
          </div>
        </div>
        <div class="about-text">
          <h2 class="section-label color-yellow fs-24">о нашем походе</h2>
          <h1 class="section-title color-black fs-32">Исследуйте все горные массивы мира вместе с нами</h1>
          <p class="section-text color-black fs-18 lh-150">Его корни уходят в один фрагмент классической латыни 45 года н.э., то есть более двух тысячелетий назад. Ричард МакКлинток, профессор латыни из колледжа Hampden-Sydney, штат Вирджиния, взял одно из самых странных слов в Lorem Ipsum, "consectetur"и занялся его поисками в классической латинской литературе.</p>
          <button
            id="btn-tour-program"
            class="bt-consultation fs-16 br-8 cur-p"
            aria-label="Заказать консультацию"
            (click)="showMessage(MessageType.Error, 'Произошла ошибка')"
          >
            Программа тура
          </button>
        </div>
      </div>

      <section class="offer-section">
        <div class="container">
          <div class="container-second-block flex-s-b">
            <div class="container-offer">
              <h2 class="subtitle color-yellow fs-24">наше предложение</h2>
              <h1 class="subtitle-title color-black fs-32">Лучшие программы для тебя</h1>
              <p class="desc color-black fs-18 margin-top-30 lh-150">Его корни уходят в один фрагмент классической латыни 45 года н.э., то есть более двух тысячелетий назад. Ричард МакКлинток, профессор латыни из колледжа.</p>
              <div class="features mt-40">

                @for (service of services; track service.id) {
                  <div class="feature-item  margin-top-20">
                    <img [src]="'/images/' + service.icon + '.svg'" class="icons"/>
                    <div class="feature-text">
                      <h3>{{ service.title }}</h3>
                      <p>{{ service.description }}</p>
                    </div>
                  </div>
                }

              </div>
              <button
                id="btn-tour-pricing"
                class="bt-consultation fs-16 br-8 mt-40 cur-p"
                aria-label="Заказать консультацию"
                (click)="showMessage(MessageType.Warn, 'Предупреждение')"
              >
                Стоимость программ
              </button>
            </div>
            <div class="images-grid">
              <img
                src="images/cup-coffee.png"
                alt="Кружка с кофе"
                class="image radius-top-left"
              />
              <img
                src="images/man-on-mountain.png"
                alt="Человек на горе"
                class="image radius-top-right"
              />
              <img
                src="images/man-on-snowmobile.png"
                alt="Человек на снегоходе"
                class="image radius-top-right"
              />
              <img
                src="images/river.png"
                alt="Река"
                class="image radius-top-left"
              />
            </div>
          </div>
        </div>
      </section>

      <section class="popular-section flex-col-cen mt-85">
        <div class="flex-col-cen">
          <h2 class="subtitle color-yellow fs-24">по версии отдыхающих</h2>
          <h1 class="subtitle-title color-black fs-32">Популярные направления</h1>
        </div>
        <div class="container-price mt-40">

          @for (destination of popularDestination; track destination.id) {
            <div class="card">
              <img
                [src]="'/images/' + destination.image + '.png'"
                alt={{ destination.image }}
                width="380"
                height="500"
              />
              <div class="rating">
                <img src="/images/star.svg" alt="star">
                {{ destination.tourEvaluation | number:'1.1-1' }}
              </div>
              <div class="card-info flex-s-b pos-abs">
                <div>
                  <h2 class="fs-24">{{ destination.nameTour }}</h2>
                  <p class="fs-14">{{ destination.tourDescription }}</p>
                </div>
                <div class="price fs-20">
                  <span>{{ destination.tourPrice }} &#36;</span>
                </div>
              </div>
            </div>
          }

        </div>
        <button
          id="btn-tour-rating"
          class="bt-consultation fs-16 br-8 mt-40 cur-p"
          (click)="showMessage(MessageType.Info, 'Информация для пользователя')"
        >
          Рейтинг направлений
        </button>
      </section>

      <section class="blog-tour flex-col-cen">
        <div class="flex-col-cen mt-85">
          <h2 class="subtitle color-yellow fs-24">делимся впечатлениями</h2>
          <h1 class="subtitle-title color-black fs-32">Блог о путешествиях</h1>
        </div>
        <div class="blog-container">

          @for (item of travelBlog; track item.id) {
            <div class="blog-card">
              <div class="blog-image">
                <img
                  [src]="'/images/' + item.imege + '.png'"
                  [alt]="item.title"
                />
              </div>

              <div class="blog-info">
                <h3>{{ item.title }}</h3>
                <p>{{ item.content }}</p>

                <div class="blog-bottom">
                  <span class="blog-date fs-14">01/04/2023</span>
                  <a [id]="'blog-' + item.id" class="read-more cur-p">читать статью</a>
                </div>
              </div>
            </div>
          }

        </div>
        <button
          id="btn-other materials"
          class="bt-consultation fs-16 br-8 mt-40 cur-p"
          (click)="showMessage(MessageType.Success, 'Успешная операция')"
          >
            Другие материалы
          </button>
      </section>

      <div class="toast-container">
        <ng-container *ngFor="let message of messages">
          <ng-container
            *ngTemplateOutlet="toastTemplate; context: {
              $implicit: message.type,
              message: message
            }">
          </ng-container>
        </ng-container>
      </div>

      <ng-template #toastTemplate let-type let-message="message">
        <div class="toast" [ngClass]="type">
          <img src="/images/message-icon.svg" alt="message">
          <div class="toast-content">
            <strong>{{ type | titlecase }}</strong>
            <div>{{ message.text | titlecase}}</div>
          </div>

          <button class="close-btn" (click)="removeMessage(message)">
            <img src="/images/close-icon.svg" alt="close">
          </button>
        </div>
      </ng-template>

    </div>
  </header>
}
